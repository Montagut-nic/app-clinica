import{b as I}from"./chunk-ZZF4ZVIA.js";import{e as w}from"./chunk-6ENO3YRF.js";import{Ga as s,La as p,Pa as d,Ra as m,V as l,g as h,kb as u,qb as f,sb as g,tb as v,ub as y}from"./chunk-TOHV62XN.js";var n=class i{loading;SCRIPT_ID="google-recaptcha-v3";load(){return this.loading?this.loading:typeof window<"u"&&window.grecaptcha?Promise.resolve():(this.loading=new Promise((t,e)=>{if(document.getElementById(this.SCRIPT_ID)){this.waitForGrecaptcha(t);return}let a=document.createElement("script");a.id=this.SCRIPT_ID,a.src="https://www.google.com/recaptcha/api.js?render=explicit",a.async=!0,a.defer=!0,a.onerror=()=>e(new Error("No se pudo cargar reCAPTCHA")),a.onload=()=>this.waitForGrecaptcha(t),document.head.appendChild(a)}),this.loading)}waitForGrecaptcha(t){let e=()=>{window.grecaptcha&&window.grecaptcha.render?t():setTimeout(e,50)};e()}static \u0275fac=function(e){return new(e||i)};static \u0275prov=l({token:i,factory:i.\u0275fac,providedIn:"root"})};var T=["host"],C=class i{constructor(t){this.loader=t}siteKey=I;theme="light";size="normal";resolved=new s;host;widgetId=null;ngOnInit(){return h(this,null,function*(){yield this.loader.load(),this.render()})}ngOnDestroy(){try{this.widgetId!==null&&typeof grecaptcha?.reset=="function"&&grecaptcha.reset(this.widgetId)}catch{}}render(){if(!this.siteKey){console.warn("[reCAPTCHA] falt\xF3 siteKey");return}this.widgetId=grecaptcha.render(this.host.nativeElement,{sitekey:this.siteKey,theme:this.theme,size:this.size,callback:t=>this.resolved.emit(t),"expired-callback":()=>this.resolved.emit(null),"error-callback":()=>this.resolved.emit(null)})}reset(){this.widgetId!==null&&grecaptcha.reset(this.widgetId)}static \u0275fac=function(e){return new(e||i)(p(n))};static \u0275cmp=d({type:i,selectors:[["app-recaptcha"]],viewQuery:function(e,a){if(e&1&&g(T,7),e&2){let r;v(r=y())&&(a.host=r.first)}},inputs:{siteKey:"siteKey",theme:"theme",size:"size"},outputs:{resolved:"resolved"},decls:2,vars:0,consts:[["host",""],[1,"g-recaptcha"]],template:function(e,a){e&1&&u(0,"div",1,0)},dependencies:[w],encapsulation:2})};var M=class i{enabled=!0;persist=!1;captchaPassed=new s;alreadyPassed=!1;alpha=Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9");onClick(t){if(!this.enabled){this.alreadyPassed=!0,this.captchaPassed.emit();return}if(this.persist&&this.alreadyPassed){this.captchaPassed.emit();return}t.preventDefault(),t.stopImmediatePropagation();let e="",a=this.alpha[Math.floor(Math.random()*this.alpha.length)],r=this.alpha[Math.floor(Math.random()*this.alpha.length)],o=this.alpha[Math.floor(Math.random()*this.alpha.length)],D=this.alpha[Math.floor(Math.random()*this.alpha.length)],b=this.alpha[Math.floor(Math.random()*this.alpha.length)],E=this.alpha[Math.floor(Math.random()*this.alpha.length)],R=this.alpha[Math.floor(Math.random()*this.alpha.length)];e+=a+" "+r+" "+o+" "+D+" "+b+" "+E+" "+R;let k=e.replaceAll(" ",""),c=window.prompt(`Introduce el c\xF3digo:

${e}`);c!==null&&(c===k?(this.alreadyPassed=!0,this.captchaPassed.emit()):alert("C\xF3digo incorrecto. Intent\xE1 nuevamente."))}static \u0275fac=function(e){return new(e||i)};static \u0275dir=m({type:i,selectors:[["","appCaptcha",""]],hostBindings:function(e,a){e&1&&f("click",function(o){return a.onClick(o)})},inputs:{enabled:[0,"appCaptcha","enabled"],persist:"persist"},outputs:{captchaPassed:"captchaPassed"}})};export{C as a,M as b};
