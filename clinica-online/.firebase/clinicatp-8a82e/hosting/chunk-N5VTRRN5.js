import{a as q}from"./chunk-ZKLBUZA2.js";import{a as P}from"./chunk-P4HMIFTW.js";import{a as E}from"./chunk-GA5BIDOY.js";import{a as L,b as U,c as I,d as T,e as A,f as D,i as R,l as V}from"./chunk-XUUOKOEX.js";import"./chunk-UYNQNJ36.js";import{a as F}from"./chunk-J3JJFWGS.js";import{a as N}from"./chunk-JFWMHDSN.js";import{c as O}from"./chunk-ZZF4ZVIA.js";import{b as S,e as j,j as k}from"./chunk-6ENO3YRF.js";import{Ba as l,Cb as u,Db as f,Eb as b,Pa as y,Ua as x,_ as a,da as h,ea as w,eb as d,fb as i,g as v,gb as o,hb as m,nb as C,qb as g,rb as M,ya as _,yb as c}from"./chunk-TOHV62XN.js";function B(s,e){if(s&1){let t=C();i(0,"button",20),g("click",function(){let p=h(t).$implicit,n=M();return w(n.useQuick(p))}),m(1,"img",21),o()}if(s&2){let t=e.$implicit;l(),d("src",t.avatar,_)}}var W=class s{auth=a(E);router=a(k);session=a(q);loader=a(N);sb=a(O).client;specialtySvc=a(P);toast=a(F);quickUsers=[{email:"piyijar697@cexch.com",password:"test123",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/12345666-1764995770462/paciente-1-1764995770952.jpg"},{email:"nico.monta99@gmail.com",password:"123456",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/34566788-1764997514653/paciente-1-1764997515116.jpg"},{email:"xidil37990@bialode.com",password:"123456",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/9876555-1765006299211/paciente-1-1765006299823.jpg"},{email:"reloyob700@datehype.com",password:"123456",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/78999000-1765031950743/especialista-1765031951225.png"},{email:"picig39619@httpsu.com",password:"123456",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/40983678-1765032754772/especialista-1765032755286.jpeg"},{email:"montagut.nm@gmail.com",password:"test123",avatar:"https://oulpgsltvlibsjrrinco.supabase.co/storage/v1/object/public/avatars/42232300-1765040370940/admin.jpg"}];ngOnInit(){document.title="La Cl\xEDnica Online - Acceso"}email="";password="";useQuick(e){this.email=e.email,this.password=e.password}submit(){return v(this,null,function*(){this.loader.show();try{let e=yield this.auth.signInEmailChecked(this.email,this.password);if(!e.ok){e.code==="CONFIRMACION"?(console.warn("[login] correo no confirmado"),this.toast.error("Tu correo electr\xF3nico no ha sido confirmado. Revisa tu bandeja de entrada.")):e.code==="PENDIENTE"?(console.warn("[login] cuenta pendiente de aprobaci\xF3n"),this.toast.error("Tu cuenta de especialista est\xE1 pendiente de aprobaci\xF3n por un administrador.")):e.code==="CREDENCIALES"?(console.warn("[login] credenciales incorrectas"),this.toast.error("Email o contrase\xF1a incorrectos.")):(console.error("[login] error desconocido al iniciar sesi\xF3n"),this.toast.error("No se pudo iniciar sesi\xF3n. Int\xE9ntalo de nuevo m\xE1s tarde."));return}yield this.session.refresh();let t=this.session.profile();if(!t){this.router.navigateByUrl("/mi-perfil",{replaceUrl:!0});return}t.categoria==="admin"?this.router.navigateByUrl("/usuarios",{replaceUrl:!0}):this.router.navigateByUrl("/mi-perfil",{replaceUrl:!0})}finally{this.loader.hide()}})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=y({type:s,selectors:[["app-login"]],decls:27,vars:3,consts:[[1,"login-page","py-5"],[1,"container"],[1,"row","justify-content-center"],[1,"col-sm-12","col-md-10","col-lg-8",2,"width","100%"],[1,"quick-access","mb-4"],[1,"qa-list"],["type","button","class","qa-btn",3,"click",4,"ngFor","ngForOf"],[1,"col-sm-10","col-md-7","col-lg-6","col-xl-7"],[1,"card","login-card","shadow-lg","border-0"],[1,"card-body","p-4"],[1,"text-center","mb-4"],[1,"rounded-circle","d-inline-flex","align-items-center","justify-content-center","mb-2"],["src","login_icon.webp","alt","Icono de iniciar sesi\xF3n",1,"login-icon"],[1,"mb-1"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["name","email","type","email","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","password","type","password","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","w-100"],["type","button",1,"qa-btn",3,"click"],[3,"src"]],template:function(t,r){t&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),x(6,B,2,1,"button",6),o()(),i(7,"div",2)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11),m(13,"img",12),o(),i(14,"h5",13),c(15," Iniciar sesi\xF3n "),o()(),i(16,"form",14),g("ngSubmit",function(){return r.submit()}),i(17,"div",15)(18,"label",16),c(19," Correo electr\xF3nico "),o(),i(20,"input",17),b("ngModelChange",function(n){return f(r.email,n)||(r.email=n),n}),o()(),i(21,"div",15)(22,"label",16),c(23," Contrase\xF1a "),o(),i(24,"input",18),b("ngModelChange",function(n){return f(r.password,n)||(r.password=n),n}),o()(),i(25,"button",19),c(26," Acceder "),o()()()()()()()()()()),t&2&&(l(6),d("ngForOf",r.quickUsers),l(14),u("ngModel",r.email),l(4),u("ngModel",r.password))},dependencies:[j,S,V,D,L,U,I,R,A,T],styles:['@charset "UTF-8";.quick-access[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:.75rem 1rem;background:#fffffff5;border-radius:.9rem;box-shadow:0 8px 20px #0f172a1f;border:1px solid rgba(148,163,184,.35)}.quick-title[_ngcontent-%COMP%]{letter-spacing:.03em;text-transform:uppercase}.row[_ngcontent-%COMP%]{flex-direction:column;flex-wrap:nowrap;align-items:center;justify-content:flex-start}.qa-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;gap:12px;justify-content:center}.qa-btn[_ngcontent-%COMP%]{height:168px;aspect-ratio:9/16;border:1px solid var(--bs-border-color);border-radius:.5rem;background:#f9fafb;padding:10px;display:flex;align-items:center;gap:10px;transition:transform .12s ease,box-shadow .12s ease,border-color .12s ease,background-color .12s ease;cursor:pointer}.qa-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 18px #0f172a2e;border-color:#2563eb;background-color:#fff}.qa-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;border-radius:.5rem;max-width:100px;aspect-ratio:1/1}.login-icon[_ngcontent-%COMP%]{max-width:10%;object-fit:contain;filter:drop-shadow(0 0 6px rgba(14,47,138,.35))}.login-card[_ngcontent-%COMP%]{border-radius:1rem;background:#fffffff7;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px)}.login-card[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}.login-card[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border-radius:.6rem}@media (max-width: 576px){.quick-access[_ngcontent-%COMP%]{padding-inline:.75rem}.qa-btn[_ngcontent-%COMP%]{width:150px}}']})};export{W as Login};
